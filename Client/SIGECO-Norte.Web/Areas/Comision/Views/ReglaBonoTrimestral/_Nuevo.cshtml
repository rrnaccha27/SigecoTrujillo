@model SIGEES.Entidades.regla_bono_trimestral_dto
@{
    string codigo_tipo_bono = "";
    string tipo_bono_option = "required: true,novalidate: true,editable:false";
    string descripcion = "required:true,novalidate:true";
    string vigencia_inicio = Model.codigo_regla > 0 ? Model.vigencia_inicio.Substring(6, 2) + '/' + Model.vigencia_inicio.Substring(4, 2) + '/' + Model.vigencia_inicio.Substring(0, 4) : "";
    string vigencia_fin = Model.codigo_regla > 0 ? Model.vigencia_fin.Substring(6, 2) + '/' + Model.vigencia_fin.Substring(4, 2) + '/' + Model.vigencia_fin.Substring(0, 4) : "";
    string vigencia_inicio_options = "required:true";
    string vigencia_fin_options = "required:true"; 
        
    if (Model.codigo_regla > 0)
    {
        codigo_tipo_bono = Model.codigo_tipo_bono.ToString();
        tipo_bono_option = tipo_bono_option + ",disabled:true";
        descripcion = descripcion + ",editable:false,disabled:true";
        vigencia_inicio_options = vigencia_inicio_options + ",disabled:true";
    }
    else
    {
        descripcion = descripcion + ",editable:true";
    }
}
<div class="easyui-layout" data-options="fit:true">
    <form id="frmregistrar" method="post">

        <div data-options="region:'north',border:false" style="padding:5px 5px 5px 0px;height:76px;width:99%">
            <div class="rowDivEtiqueta">
                <label class="colGridModal">Descripción</label>
            </div>
            <div class="rowDivValor">
                <input class="easyui-validatebox textbox" value="@Model.descripcion" maxlength="100" id="descripcion" style="width:99%;" data-options="@descripcion" />
            </div>
            <div class="rowDivEtiqueta">
                <label class="colGridModal">Tipo Bono</label>
            </div>
            <div class="rowDivValor">
                <input id="cmb_tipo_bono" value="@codigo_tipo_bono" class="easyui-combobox" style="width:99%;" data-options="@tipo_bono_option">
            </div>
            <div class="rowDivEtiqueta">
                <label class="colGridModal">Vigencia Inicio</label>
            </div>
            <div class="rowDivValor">
                <input class="easyui-datebox" id="fechaInicio" name="fechaInicio" value="@vigencia_inicio" style="width:50%;" data-options="@vigencia_inicio_options" />
            </div>
            <div class="rowDivEtiqueta">
                <label class="colGridModal">Vigencia Fin</label>
            </div>
            <div class="rowDivValor">
                <input class="easyui-datebox" id="fechaFin" name="fechaFin" value="@vigencia_fin" style="width:50%;" data-options="@vigencia_fin_options" />
            </div>
        </div>

        <div data-options="region:'center'" style="padding:5px;width:99%">
            <div class="easyui-tabs" style="width:100%; height:100%">
                <div title="Configuracion" style="padding:5px;">
                    <div id="tlb_detalle_regla">
                        @if (Model.estado_registro)
                        {
                            <a href="javascript:void(0)" id="btn_detalle_regla_crear" class="easyui-linkbutton" style="padding: 0px 10px 0px 10px; " data-options="iconCls:'icon-add',disabled:false" onclick="NuevoDetalleRegla()">Crear</a>
                            <a href="javascript:void(0)" id="btn_detalle_regla_quitar" class="easyui-linkbutton" style="padding: 0px 10px 0px 10px; " data-options="iconCls:'icon-remove',disabled:true" onclick="fnEliminarDetalleRegla()">Quitar</a>
                            <a href="javascript:void(0)" id="btn_detalle_regla_aceptar" class="easyui-linkbutton" style="padding: 0px 10px 0px 10px; " data-options="iconCls:'icon-save',disabled:true" onclick="fnGuardarDetalleRegla()">Aceptar</a>
                            <a href="javascript:void(0)" id="btn_detalle_regla_cancelar" class="easyui-linkbutton" style="padding: 0px 10px 0px 10px; " data-options="iconCls:'icon-cancel',disabled:true" onclick="fnCancelarDetalleRegla()">Cancelar</a>
                        }
                    </div>
                    <table id="dgv_lista_detalle_regla" style="width: 100%;height:100%"></table>
                </div>

                <div title="Meta" style="padding:5px;">
                    <div id="tbMeta">
                        @if (Model.estado_registro)
                        {
                            <a href="javascript:NuevoRegistro()" id="btn_meta_crear" class="easyui-linkbutton" style="padding: 0px 10px 0px 10px; " data-options="iconCls:'icon-add', disabled:false">Crear</a>
                            <a href="javascript:EliminarRegistro()" id="btn_meta_quitar" class="easyui-linkbutton" style="padding: 0px 10px 0px 10px; " data-options="iconCls:'icon-remove', disabled:true">Quitar</a>
                            <a href="javascript:AceptarRegistro()" id="btn_meta_aceptar" class="easyui-linkbutton" style="padding: 0px 10px 0px 10px; " data-options="iconCls:'icon-save', disabled:true">Aceptar</a>
                            <a href="javascript:CancelarRegistro()" id="btn_meta_cancelar" class="easyui-linkbutton" style="padding: 0px 10px 0px 10px; " data-options="iconCls:'icon-cancel', disabled:true">Cancelar</a>
                        }
                    </div>
                    <table id="dgMeta" style="width: 100%; height:100%"></table>
                </div>

            </div>
        </div>

        <div data-options="region:'south',border:false" style="text-align:right;padding:5px 0px 5px 0px;width:99%">
            @if (Model.estado_registro)
            {
                <a href="javascript:void(0)" class="easyui-linkbutton" style="padding: 0px 10px 0px 10px; " iconcls="icon-ok" onclick="fnRegistrarReglaBonoTrimestral()">Guardar</a>
            }

            <a href="javascript:cerrar_regla();" class="easyui-linkbutton" style="padding: 0px 10px 0px 10px; " iconcls="icon-cancel" id="btnCancelar">Cancelar</a>
        </div>

</form>
</div>


<script type="text/javascript" src="~/Areas/Comision/Scripts/Views/ReglaBonoTrimestral/reglabonotrimestral.nuevo.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        var actionUrls =
        {
            _GetTipoBonoTrimestralJson: '@Url.Action("GetTipoBonoTrimestralJson", "ReglaBonoTrimestral", new { area = "Comision" })',
            _GetEmpresaJson: '@Url.Action("GetEmpresaJson", "ReglaBonoTrimestral", new { area = "Comision" })',
            _GetCanalJson: '@Url.Action("GetCanalJson", "ReglaBonoTrimestral", new { area = "Comision" })',
            _GetTipoVentaJson: '@Url.Action("GetTipoVentaJson", "ReglaBonoTrimestral", new { area = "Comision" })',
            _ValidarDuplicidadRegistro: '@Url.Action("ValidarDuplicidadRegla", "ReglaBonoTrimestral", new { area = "Comision" })',
            _Registrar: '@Url.Action("Registrar", "ReglaBonoTrimestral", new { area = "Comision" })',
            _GetDetalleAllJson: '@Url.Action("GetDetalleAllJson", "ReglaBonoTrimestral", new { area = "Comision" })',
            _GetMetaAllJson: '@Url.Action("GetMetaAllJson", "ReglaBonoTrimestral", new { area = "Comision" })',
            _codigo_regla:@Model.codigo_regla

            };
        project.reglabonotrimestral_nuevo.Initialize(actionUrls);
    });

    function cerrar_regla()
    {
        $("#div_registrar_regla").dialog("close");
    }
</script>
